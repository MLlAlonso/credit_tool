<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Créditos</title>
    <link rel="icon" href="src/img/Ml.png">
    <link rel="stylesheet" href="/src/styles/main.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="container">
        <h1 class="main-title">Herramienta de Registro de Créditos</h1>

        <section id="creditoFormSection" class="card form-section" style="display:none;">
            <h2 class="section-title">Registrar Nuevo Crédito</h2>

            <form id="creditoForm" class="credito-form">
                <div class="form-group">
                    <label for="cliente" class="form-group__label">Cliente:</label>
                    <input type="text" id="cliente" name="cliente" required class="form-group__input" placeholder="Nombre del cliente">
                </div>

                <div class="form-group">
                    <label for="monto" class="form-group__label">Monto ($):</label>
                    <input type="number" id="monto" name="monto" step="0.01" required min="0" class="form-group__input" placeholder="Monto del crédito">
                </div> 

                <div class="form-group">
                    <label for="tasa_interes" class="form-group__label">Tasa de Interés (% anual):</label>
                    <input type="number" id="tasa_interes" name="tasa_interes" step="0.001" required min="0" class="form-group__input" placeholder="Tasa de interés anual">
                </div>

                <div class="form-group">
                    <label for="plazo" class="form-group__label">Plazo (meses):</label>
                    <input type="number" id="plazo" name="plazo" required min="1" class="form-group__input" placeholder="Plazo en meses">
                </div>

                <div class="form-group">
                    <label for="fecha_otorgamiento" class="form-group__label">Fecha de Otorgamiento:</label>
                    <input type="date" id="fecha_otorgamiento" name="fecha_otorgamiento" required class="form-group__input">
                </div>

                <button type="submit" class="button button--primary credito-form__submit">Registrar Crédito</button>
                <button type="button" class="button button--secondary credito-form__cancel" id="cancelEditBtn">Cancelar</button>
            </form>

        </section>

        <section class="card list-section">
            <div class="section-header">
                <h2 class="section-title">Créditos Registrados</h2>
                <button id="toggleFormBtn" class="button button--primary form-toggle-section__button">Registrar Nuevo Crédito</button>
            </div>
            
            <div class="filter-controls">
                <div class="filter-controls__group">
                    <label for="filterCliente" class="filter-controls__label">Buscar Cliente:</label>
                    <input type="text" id="filterCliente" class="filter-controls__input" placeholder="Nombre del cliente">
                </div>

                <div class="filter-controls__group">
                    <label for="minMonto" class="filter-controls__label">Monto Mínimo:</label>
                    <input type="number" id="minMonto" class="filter-controls__input" step="0.01" min="0">
                </div>

                <div class="filter-controls__group">
                    <label for="maxMonto" class="filter-controls__label">Monto Máximo:</label>
                    <input type="number" id="maxMonto" class="filter-controls__input" step="0.01" min="0">
                </div>

                <button id="applyFiltersBtn" class="button button--secondary filter-controls__button">Aplicar Filtros</button>
                <button id="clearFiltersBtn" class="button button--tertiary filter-controls__button">Limpiar Filtros</button>
            </div>

            <div class="table-responsive">
                <table id="creditosTable" class="creditos-table">
                    <thead class="creditos-table__head">
                        <tr class="creditos-table__row">
                            <th class="creditos-table__header" data-sort-by="id">ID <span class="sort-icon"></span></th>
                            <th class="creditos-table__header" data-sort-by="cliente">Cliente <span class="sort-icon"></span></th>
                            <th class="creditos-table__header" data-sort-by="monto">Monto <span class="sort-icon"></span></th>
                            <th class="creditos-table__header" data-sort-by="tasa_interes">Tasa (%) <span class="sort-icon"></span></th>
                            <th class="creditos-table__header" data-sort-by="plazo">Plazo (Meses) <span class="sort-icon"></span></th>
                            <th class="creditos-table__header" data-sort-by="fecha_otorgamiento">Fecha <span class="sort-icon"></span></th>
                            <th class="creditos-table__header">Pago Mensual</th>
                            <th class="creditos-table__header">Acciones</th>
                        </tr>
                    </thead>

                    <tbody class="creditos-table__body"> </tbody>
                </table>
            </div>
        </section>

        <section class="card chart-section">
            <h2 class="section-title">Resumen de Créditos</h2>
            <div class="chart-section__container">
                <canvas id="creditosChart"></canvas>
            </div>
            <p class="chart-section__total">Total de Créditos Otorgados: <span id="totalCreditos">0</span></p>
        </section>
    </div>

    <footer class="footer">
        <div class="footer__container">
            <p>&copy; 2025 Catálogo de Contenedores. <br> 
                Desarrollado por <a href="https://mllalonso.github.io/landing-pages-suite/" target="_blank">Mikkel Llaven Alonso</a>.
            </p>
        </div>
    </footer>

    <script type="module" src="/src/js/main.js"></script>
</body>
</html>